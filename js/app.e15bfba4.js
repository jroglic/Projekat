(function(){"use strict";var e={3222:function(e,i,a){var t=a(3751),r=a(641),o=a(33),n=a.p+"img/Recipe_Vault_Logo.2ea84989.png";const l={id:"app"},s={class:"navbar"},c={key:0},u={key:1},p={key:2};function d(e,i,a,t,d,m){const k=(0,r.g2)("router-link"),v=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("nav",s,[i[6]||(i[6]=(0,r.Lk)("div",{class:"nav-brand"},[(0,r.Lk)("img",{src:n,alt:"Logo",class:"logo"})],-1)),(0,r.Lk)("button",{class:"nav-toggle",onClick:i[0]||(i[0]=(...e)=>m.toggleMenu&&m.toggleMenu(...e))}," ☰ "),(0,r.Lk)("ul",{class:(0,o.C4)({"nav-menu":!0,"nav-active":d.isMenuOpen})},[(0,r.Lk)("li",null,[(0,r.bF)(k,{to:"/"},{default:(0,r.k6)((()=>i[2]||(i[2]=[(0,r.eW)("Home")]))),_:1})]),d.isLoggedIn?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("li",c,[(0,r.bF)(k,{to:"/login"},{default:(0,r.k6)((()=>i[3]||(i[3]=[(0,r.eW)("Login")]))),_:1})])),d.isLoggedIn?((0,r.uX)(),(0,r.CE)("li",u,[(0,r.bF)(k,{to:"/welcome"},{default:(0,r.k6)((()=>i[4]||(i[4]=[(0,r.eW)("Profil")]))),_:1})])):(0,r.Q3)("",!0),d.isLoggedIn?((0,r.uX)(),(0,r.CE)("li",p,[(0,r.Lk)("button",{onClick:i[1]||(i[1]=(...e)=>m.logout&&m.logout(...e))},"Logout")])):(0,r.Q3)("",!0),(0,r.Lk)("li",null,[(0,r.bF)(k,{to:"/javneliste"},{default:(0,r.k6)((()=>i[5]||(i[5]=[(0,r.eW)("JavneListe")]))),_:1})])],2)]),(0,r.bF)(v)])}a(4114);var m={data(){return{isMenuOpen:!1,isLoggedIn:!1}},created(){this.checkUserStatus()},methods:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen},logout(){localStorage.removeItem("user"),this.isLoggedIn=!1,this.$router.push("/login")},checkUserStatus(){const e=localStorage.getItem("user");this.isLoggedIn=!!e}},watch:{$route(){this.checkUserStatus()}}},k=a(6262);const v=(0,k.A)(m,[["render",d]]);var h=v,_=a(5220);const j={class:"home"},b={key:0},z={key:1},L={class:"recipe-container"},g=["onClick"],C=["onClick"],y={class:"modal-content"},R=["value"],f={class:"modal-content"},E={key:0},X=["onClick"],K={key:1},D=["onClick"],M={key:2};function I(e,i,a,n,l,s){return(0,r.uX)(),(0,r.CE)("div",j,[i[14]||(i[14]=(0,r.Lk)("h1",null,"Svi recepti",-1)),l.recepti&&0===l.recepti.length?((0,r.uX)(),(0,r.CE)("div",b,i[8]||(i[8]=[(0,r.Lk)("p",null,"Nema recepata za prikazivanje.",-1)]))):((0,r.uX)(),(0,r.CE)("div",z,[(0,r.Lk)("div",L,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.recepti,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.rec_id,class:"recipe-box"},[(0,r.Lk)("h2",null,(0,o.v_)(e.rec_naziv),1),(0,r.Lk)("p",null,"Vreme pripreme:"+(0,o.v_)(e.rec_vremepripreme)+" minuta",1),(0,r.Lk)("p",null,"Broj ljudi: "+(0,o.v_)(e.rec_brojljudi),1),(0,r.Lk)("p",null,(0,o.v_)(s.skratiOpis(e.rec_priprema)),1),(0,r.Lk)("button",{onClick:i=>s.otvoriModal(e)},"Detalji",8,g),(0,r.Lk)("button",{onClick:i=>s.otvoriModalZaListu(e)},"+",8,C)])))),128))])])),l.prikaziModalZaDodavanje?((0,r.uX)(),(0,r.CE)("div",{key:2,class:"modal",onClick:i[3]||(i[3]=(0,t.D$)(((...e)=>s.zatvoriModalZaDodavanje&&s.zatvoriModalZaDodavanje(...e)),["self"]))},[(0,r.Lk)("div",y,[(0,r.Lk)("span",{class:"close",onClick:i[0]||(i[0]=(...e)=>s.zatvoriModalZaDodavanje&&s.zatvoriModalZaDodavanje(...e))},"×"),i[10]||(i[10]=(0,r.Lk)("h2",null,"Dodaj recept u listu",-1)),(0,r.Lk)("div",null,[i[9]||(i[9]=(0,r.Lk)("label",{for:"izabranaLista"},"Odaberi listu:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":i[1]||(i[1]=e=>l.izabranaLista=e),id:"izabranaLista"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.liste,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.lis_id,value:e.lis_id},(0,o.v_)(e.lis_naziv),9,R)))),128))],512),[[t.u1,l.izabranaLista]])]),l.user_id?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:i[2]||(i[2]=(...e)=>s.dodajReceptUListu&&s.dodajReceptUListu(...e))},"Dodaj u listu")):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),l.izabraniRecept&&l.izabraniRecept.sastojci?((0,r.uX)(),(0,r.CE)("div",{key:3,class:"modal",onClick:i[7]||(i[7]=(0,t.D$)(((...e)=>s.zatvoriModal&&s.zatvoriModal(...e)),["self"]))},[(0,r.Lk)("div",f,[(0,r.Lk)("span",{class:"close",onClick:i[4]||(i[4]=(...e)=>s.zatvoriModal&&s.zatvoriModal(...e))},"×"),(0,r.Lk)("h2",null,(0,o.v_)(l.izabraniRecept.rec_naziv),1),i[12]||(i[12]=(0,r.Lk)("h3",null,"Sastojci:",-1)),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.izabraniRecept.sastojci,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.sas_naziv},(0,o.v_)(e.sas_naziv)+" - "+(0,o.v_)(parseInt(e.rsa_kolicina))+" "+(0,o.v_)(e.mer_naziv),1)))),128))]),(0,r.Lk)("p",null,"Opis pripreme:"+(0,o.v_)(l.izabraniRecept.rec_priprema),1),(0,r.Lk)("p",null,"Vreme pripreme: "+(0,o.v_)(l.izabraniRecept.rec_vremepripreme)+" minuta",1),(0,r.Lk)("p",null,"Broj ljudi: "+(0,o.v_)(l.izabraniRecept.rec_brojljudi),1),i[13]||(i[13]=(0,r.Lk)("h3",null,"Komentari:",-1)),l.izabraniRecept.komentari&&l.izabraniRecept.komentari.length>0?((0,r.uX)(),(0,r.CE)("ul",E,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.izabraniRecept.komentari,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.kom_id},[(0,r.eW)((0,o.v_)(e.kom_sadrzaj)+" - "+(0,o.v_)(e.kom_datum_postavljanja)+" ",1),s.mozeBrisatiKomentar(e)?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:i=>s.obrisiKomentar(e.kom_id)},"Obriši",8,X)):(0,r.Q3)("",!0)])))),128))])):(0,r.Q3)("",!0),l.komentari.length?((0,r.uX)(),(0,r.CE)("div",K,[(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.komentari,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.kom_id},[(0,r.Lk)("strong",null,(0,o.v_)(e.user_Fname)+" "+(0,o.v_)(e.user_Lname)+":",1),s.mozeBrisatiKomentar(e)?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:i=>s.obrisiKomentar(e.kom_id)},"Obriši",8,D)):(0,r.Q3)("",!0)])))),128))])])):((0,r.uX)(),(0,r.CE)("p",M,"Nema komentara za prikazivanje.")),(0,r.Lk)("form",{onSubmit:i[6]||(i[6]=(0,t.D$)(((...e)=>s.dodajKomentar&&s.dodajKomentar(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":i[5]||(i[5]=e=>l.noviKomentar=e),placeholder:"Dodaj komentar"},null,512),[[t.Jo,l.noviKomentar]]),i[11]||(i[11]=(0,r.Lk)("button",{type:"submit"},"Dodaj komentar",-1))],32)])])):(0,r.Q3)("",!0)])}var F=a(4335),S={name:"HomeView",data(){return{user_level:null,recepti:[],izabraniRecept:null,sastojci:[],noviKomentar:"",komentari:[],user_id:null,prikaziModalZaDodavanje:!1,receptZaDodavanje:null,prikaziModalZaListu:!1,izabranaLista:null,liste:[],receptiIzListe:[]}},mounted(){F.A.get("http://localhost:3000/recepti").then((e=>{this.recepti=e.data})).catch((e=>{console.error("Greska prilikom dobavljanja recepata:",e)})),this.dobaviListe()},created(){const e=JSON.parse(localStorage.getItem("user"));e?(this.userFname=e.user_Fname,this.userLname=e.user_Lname,this.user_id=e.user_id,console.log("Učitani user_id:",this.user_id),this.user_level=e.user_level):console.log("User nije pronadjen u localStorage")},methods:{otvoriModal(e){this.izabraniRecept=e,this.dobaviKomentare()},zatvoriModal(){this.izabraniRecept=null},skratiOpis(e){return e.length>100?e.substring(0,100)+"...":e},dodajKomentar(){if(!this.user_id)return void console.error("User ID nije definisan");const e={kom_sadrzaj:this.noviKomentar,user_id:this.user_id,rec_id:this.izabraniRecept.rec_id};F.A.post("http://localhost:3000/komentari",e).then((()=>{alert("Komentar je uspesno dodat"),this.noviKomentar="",this.dobaviKomentare()})).catch((e=>{console.error("Greska prilikom dodavanja komentara",e)}))},dobaviKomentare(){F.A.get(`http://localhost:3000/komentari/${this.izabraniRecept.rec_id}`).then((e=>{this.izabraniRecept.komentari=e.data.length>0?e.data:[]})).catch((e=>{console.error("Greska prilikom dobavljanja komentara",e)}))},obrisiKomentar(e){confirm("Da li ste sigurni da želite da obrišete ovaj komentar?")&&F.A.delete(`http://localhost:3000/komentari/${e}/${this.user_id}`).then((()=>{alert("Komentar je uspešno obrisan."),this.dobaviKomentare(this.izabraniRecept.rec_id)})).catch((e=>{console.error("Greška prilikom brisanja komentara:",e)}))},mozeBrisatiKomentar(e){return 1===this.user_level||this.user_id===e.user_id},otvoriModalZaListu(e){this.user_id?(this.receptZaDodavanje=e,this.prikaziModalZaDodavanje=!0):alert("Morate biti ulogovani da biste dodali recept u listu.")},zatvoriModalZaDodavanje(){this.prikaziModalZaDodavanje=!1,this.receptZaDodavanje=null},dodajUListu(e,i){F.A.post(`http://localhost:3000/lista/${i}/recept`,{rec_id:e}).then((()=>{alert("Recept je uspešno dodat u listu!"),this.zatvoriModalZaDodavanje()})).catch((e=>{console.error("Greška prilikom dodavanja recepta u listu:",e)}))},zatvoriModalListe(){this.prikaziModalZaListu=!1},dobaviListe(){F.A.get("http://localhost:3000/liste/"+this.user_id).then((e=>{this.liste=e.data})).catch((e=>{console.error("Greška prilikom dobavljanja listi:",e)}))},dodajReceptUListu(){if(this.user_id){if(this.izabranaLista)return this.receptZaDodavanje&&this.receptZaDodavanje.rec_id?void F.A.post(`http://localhost:3000/lista/${this.izabranaLista}/recept`,{rec_id:this.receptZaDodavanje.rec_id,user_id:this.user_id}).then((()=>{alert("Recept je uspešno dodat u listu"),this.zatvoriModalZaDodavanje()})).catch((e=>{console.error("Greška prilikom dodavanja recepta u listu:",e)})):(console.error("rec_id nije definisan."),void alert("Došlo je do greške, recept nije ispravno postavljen."));alert("Morate izabrati listu.")}else alert("Morate biti ulogovani da biste dodali recept u listu.")},otvoriModalZaDodavanje(e){this.user_id?(this.receptZaDodavanje=e,this.prikaziModalZaDodavanje=!0):alert("Morate biti ulogovani da biste dodali recept u listu")}}};const U=(0,k.A)(S,[["render",I]]);var Z=U;const A={class:"welcome-page"},O={class:"tabs"},$={key:0,class:"add-recept"},V=["onUpdate:modelValue"],J=["onUpdate:modelValue"],w=["onUpdate:modelValue"],Q=["value"],G=["onClick"],N={key:0},x={key:1},T={key:0,class:"recipe-container"},q=["onClick"],B=["onClick"],W=["onClick"],P={key:1},H={key:2},Y={key:0},ee=["onClick"],ie={key:1},ae={key:2},te=["onClick"],re=["onClick"],oe={class:"modal-content"},ne={class:"modal-content"},le={class:"modal-content"},se={key:0},ce=["onClick"],ue={key:1},pe=["onClick"],de={key:2},me={key:1,class:"modal"},ke={class:"modal-content"},ve=["onUpdate:modelValue"],he=["onUpdate:modelValue"],_e=["onUpdate:modelValue"],je=["value"],be=["onClick"];function ze(e,i,a,n,l,s){return(0,r.uX)(),(0,r.CE)("div",A,[(0,r.Lk)("h1",null,(0,o.v_)(l.userFname)+" "+(0,o.v_)(l.userLname)+", radujemo se tvojim novim receptima!🍕🥗🍲",1),(0,r.Lk)("div",O,[(0,r.Lk)("button",{class:(0,o.C4)({acitve:"recepti"===l.currentTab}),onClick:i[0]||(i[0]=e=>l.currentTab="recepti")},"Moji recepti",2),(0,r.Lk)("button",{class:(0,o.C4)({active:"liste"===l.currentTab}),onClick:i[1]||(i[1]=e=>l.currentTab="liste")},"Moje liste",2),l.canAddRecipe&&"recepti"===l.currentTab?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:i[2]||(i[2]=e=>l.prikaziFormu=!l.prikaziFormu),class:"toggle-form"},(0,o.v_)(l.prikaziFormu?"Zatvori formu":"Dodaj recept"),1)):(0,r.Q3)("",!0),"liste"===l.currentTab?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:i[3]||(i[3]=e=>l.prikaziFormuZaKreiranjeListe=!l.prikaziFormuZaKreiranjeListe)}," Kreiraj novu listu ")):(0,r.Q3)("",!0)]),l.prikaziFormu&&"recepti"===l.currentTab?((0,r.uX)(),(0,r.CE)("div",$,[i[28]||(i[28]=(0,r.Lk)("h2",null,"Dodaj novi recept",-1)),(0,r.Lk)("form",{onSubmit:i[9]||(i[9]=(0,t.D$)(((...e)=>s.submitRecept&&s.submitRecept(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":i[4]||(i[4]=e=>l.rec_naziv=e),placeholder:"Naziv recepta",required:""},null,512),[[t.Jo,l.rec_naziv]]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.receptSastojci,((e,i)=>((0,r.uX)(),(0,r.CE)("div",{key:i,class:"sastojak-form"},[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":i=>e.naziv=i,placeholder:"Naziv sastojka",required:""},null,8,V),[[t.Jo,e.naziv]]),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":i=>e.rsa_kolicina=i,placeholder:"Količina",required:""},null,8,J),[[t.Jo,e.rsa_kolicina,void 0,{number:!0}]]),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":i=>e.mer_id=i},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.merneJedinice,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.mer_id,value:e.mer_id},(0,o.v_)(e.mer_naziv),9,Q)))),128))],8,w),[[t.u1,e.mer_id]]),(0,r.Lk)("button",{onClick:(0,t.D$)((e=>s.ukloniSastojak(i)),["prevent"])},"Ukloni",8,G)])))),128)),(0,r.Lk)("button",{onClick:i[5]||(i[5]=(0,t.D$)(((...e)=>s.dodajSastojak&&s.dodajSastojak(...e)),["prevent"]))},"Dodaj sastojak"),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":i[6]||(i[6]=e=>l.rec_priprema=e),placeholder:"Opis pripreme",required:""},null,512),[[t.Jo,l.rec_priprema]]),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":i[7]||(i[7]=e=>l.rec_vremepripreme=e),placeholder:"Vreme pripreme (minuti)",required:""},null,512),[[t.Jo,l.rec_vremepripreme,void 0,{number:!0}]]),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":i[8]||(i[8]=e=>l.rec_brojljudi=e),placeholder:"Broj osoba",required:""},null,512),[[t.Jo,l.rec_brojljudi,void 0,{number:!0}]]),i[27]||(i[27]=(0,r.Lk)("button",{type:"submit"},"Dodaj recept",-1))],32),l.message?((0,r.uX)(),(0,r.CE)("p",N,(0,o.v_)(l.message),1)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),"recepti"===l.currentTab?((0,r.uX)(),(0,r.CE)("div",x,[l.korisnickiRecepti.length>0?((0,r.uX)(),(0,r.CE)("div",T,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.korisnickiRecepti,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.rec_id,class:"recipe-box"},[(0,r.Lk)("h3",null,(0,o.v_)(e.rec_naziv),1),(0,r.Lk)("p",null,"Vreme pripreme: "+(0,o.v_)(e.rec_vremepripreme)+" minuta",1),(0,r.Lk)("p",null,"Broj ljudi: "+(0,o.v_)(e.rec_brojljudi),1),(0,r.Lk)("p",null,(0,o.v_)(s.skratiOpis(e.rec_priprema)),1),(0,r.Lk)("button",{onClick:i=>s.otvoriModal(e)},"Detalji",8,q),(0,r.Lk)("button",{onClick:i=>s.otvoriFormuZaIzmenu(e)},"Izmeni",8,B),(0,r.Lk)("button",{onClick:i=>s.obrisiRecept(e.rec_id)},"Obriši",8,W)])))),128))])):((0,r.uX)(),(0,r.CE)("p",P,"Nema recepata za prikazivanje"))])):(0,r.Q3)("",!0),"liste"===l.currentTab?((0,r.uX)(),(0,r.CE)("div",H,[l.liste.length>0?((0,r.uX)(),(0,r.CE)("div",Y,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.liste,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.lis_id},[(0,r.Lk)("h3",{onClick:i=>s.prikaziRecepteIzListe(e.lis_id)},(0,o.v_)(e.lis_naziv),9,ee)])))),128))])):((0,r.uX)(),(0,r.CE)("div",ie,i[29]||(i[29]=[(0,r.Lk)("p",null,"Nemate kreirane liste.",-1)]))),l.receptiIzListe.length>0?((0,r.uX)(),(0,r.CE)("div",ae,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.receptiIzListe,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.rec_id},[(0,r.Lk)("h3",{onClick:i=>s.prikaziDetaljeRecepta(e)},(0,o.v_)(e.rec_naziv),9,te),(0,r.Lk)("button",{onClick:i=>s.ukloniReceptIzListe(e.rec_id,l.izabranaListaId)},"Ukloni",8,re)])))),128))])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),l.prikaziDetalje&&l.izabraniRecept&&l.izabraniRecept.sastojci?((0,r.uX)(),(0,r.CE)("div",{key:3,class:"modal",onClick:i[11]||(i[11]=(0,t.D$)(((...e)=>s.zatvoriModal&&s.zatvoriModal(...e)),["self"]))},[(0,r.Lk)("div",oe,[(0,r.Lk)("span",{class:"close",onClick:i[10]||(i[10]=(...e)=>s.zatvoriModal&&s.zatvoriModal(...e))},"×"),(0,r.Lk)("h2",null,(0,o.v_)(l.izabraniRecept.rec_naziv),1),i[30]||(i[30]=(0,r.Lk)("h3",null,"Sastojci:",-1)),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.izabraniRecept.sastojci,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.sas_naziv},(0,o.v_)(e.sas_naziv)+" - "+(0,o.v_)(parseInt(e.rsa_kolicina))+" "+(0,o.v_)(e.mer_naziv),1)))),128))]),(0,r.Lk)("p",null,"Opis pripreme: "+(0,o.v_)(l.izabraniRecept.rec_priprema),1),(0,r.Lk)("p",null,"Vreme pripreme: "+(0,o.v_)(l.izabraniRecept.rec_vremepripreme)+" minuta",1),(0,r.Lk)("p",null,"Broj ljudi: "+(0,o.v_)(l.izabraniRecept.rec_brojljudi),1)])])):(0,r.Q3)("",!0),l.prikaziFormuZaKreiranjeListe?((0,r.uX)(),(0,r.CE)("div",{key:4,class:"modal",onClick:i[15]||(i[15]=(0,t.D$)(((...e)=>s.zatvoriModal&&s.zatvoriModal(...e)),["self"]))},[(0,r.Lk)("div",ne,[(0,r.Lk)("span",{class:"close",onClick:i[12]||(i[12]=(...e)=>s.zatvoriModal&&s.zatvoriModal(...e))},"×"),i[32]||(i[32]=(0,r.Lk)("h2",null,"Kreiraj novu listu",-1)),(0,r.Lk)("form",{onSubmit:i[14]||(i[14]=(0,t.D$)(((...e)=>s.dodajListu&&s.dodajListu(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":i[13]||(i[13]=e=>l.novaListaNaziv=e),placeholder:"Naziv liste",required:""},null,512),[[t.Jo,l.novaListaNaziv]]),i[31]||(i[31]=(0,r.Lk)("button",{type:"submit"},"Kreiraj listu",-1))],32)])])):(0,r.Q3)("",!0),(0,r.Lk)("div",null,[l.izabraniRecept?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"modal",onClick:i[19]||(i[19]=(0,t.D$)(((...e)=>s.zatvoriModal&&s.zatvoriModal(...e)),["self"]))},[(0,r.Lk)("div",le,[(0,r.Lk)("span",{class:"close",onClick:i[16]||(i[16]=(...e)=>s.zatvoriModal&&s.zatvoriModal(...e))},"×"),(0,r.Lk)("h2",null,(0,o.v_)(l.izabraniRecept.rec_naziv),1),i[34]||(i[34]=(0,r.Lk)("h3",null,"Sastojci:",-1)),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.izabraniRecept.sastojci,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.sas_naziv},(0,o.v_)(e.sas_naziv)+" - "+(0,o.v_)(parseInt(e.rsa_kolicina))+" "+(0,o.v_)(e.mer_naziv),1)))),128))]),(0,r.Lk)("p",null,"Opis pripreme: "+(0,o.v_)(l.izabraniRecept.rec_priprema),1),(0,r.Lk)("p",null,"Vreme pripreme:"+(0,o.v_)(l.izabraniRecept.rec_vremepripreme)+" minuta",1),(0,r.Lk)("p",null,"Broj ljudi:"+(0,o.v_)(l.izabraniRecept.rec_brojljudi),1),i[35]||(i[35]=(0,r.Lk)("h3",null,"Komentari:",-1)),l.izabraniRecept.komentari&&l.izabraniRecept.komentari.length>0?((0,r.uX)(),(0,r.CE)("ul",se,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.izabraniRecept.komentari,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.kom_id},[(0,r.eW)((0,o.v_)(e.kom_sadrzaj)+" - "+(0,o.v_)(e.kom_datum_postavljanja)+" ",1),s.mozeBrisatiKomentar(e)?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:i=>s.obrisiKomentar(e.kom_id)},"Obriši",8,ce)):(0,r.Q3)("",!0)])))),128))])):(0,r.Q3)("",!0),l.komentari.length?((0,r.uX)(),(0,r.CE)("div",ue,[(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.komentari,(i=>((0,r.uX)(),(0,r.CE)("li",{key:i.kom_id},[(0,r.Lk)("strong",null,(0,o.v_)(i.user_Fname)+" "+(0,o.v_)(i.user_Lname)+":",1),e.canDeleteComment(i)?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:e=>s.obrisiKomentar(i.kom_id)},"Obriši",8,pe)):(0,r.Q3)("",!0)])))),128))])])):((0,r.uX)(),(0,r.CE)("p",de,"Nema komentara za prikazivanje.")),(0,r.Lk)("form",{onSubmit:i[18]||(i[18]=(0,t.D$)(((...e)=>s.dodajKomentar&&s.dodajKomentar(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":i[17]||(i[17]=e=>l.noviKomentar=e),placeholder:"Dodaj komentar"},null,512),[[t.Jo,l.noviKomentar]]),i[33]||(i[33]=(0,r.Lk)("button",{type:"submit"},"Dodaj komentar",-1))],32)])])):(0,r.Q3)("",!0),l.prikaziFormuZaIzmenu?((0,r.uX)(),(0,r.CE)("div",me,[(0,r.Lk)("div",ke,[(0,r.Lk)("span",{class:"close",onClick:i[20]||(i[20]=(...e)=>s.zatvoriModal&&s.zatvoriModal(...e))},"×"),i[37]||(i[37]=(0,r.Lk)("h2",null,"Izmeni recept",-1)),(0,r.Lk)("form",{onSubmit:i[26]||(i[26]=(0,t.D$)(((...e)=>s.izmeniRecept&&s.izmeniRecept(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":i[21]||(i[21]=e=>l.rec_naziv=e),placeholder:"Naziv recepta",required:""},null,512),[[t.Jo,l.rec_naziv]]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.receptSastojci,((e,i)=>((0,r.uX)(),(0,r.CE)("div",{key:i,class:"sastojak-form"},[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":i=>e.sas_naziv=i,placeholder:"Sastojak",required:""},null,8,ve),[[t.Jo,e.sas_naziv]]),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":i=>e.rsa_kolicina=i,placeholder:"Količina",required:""},null,8,he),[[t.Jo,e.rsa_kolicina,void 0,{number:!0}]]),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":i=>e.mer_id=i},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.merneJedinice,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.mer_id,value:e.mer_id},(0,o.v_)(e.mer_naziv),9,je)))),128))],8,_e),[[t.u1,e.mer_id]]),(0,r.Lk)("button",{onClick:(0,t.D$)((e=>s.ukloniSastojak(i)),["prevent"])},"Ukloni",8,be)])))),128)),(0,r.Lk)("button",{onClick:i[22]||(i[22]=(0,t.D$)(((...e)=>s.dodajSastojak&&s.dodajSastojak(...e)),["prevent"]))},"Dodaj sastojak"),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":i[23]||(i[23]=e=>l.rec_priprema=e),placeholder:"Opis pripreme",required:""},null,512),[[t.Jo,l.rec_priprema]]),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":i[24]||(i[24]=e=>l.rec_vremepripreme=e),placeholder:"Vreme pripreme(minuti)",required:""},null,512),[[t.Jo,l.rec_vremepripreme,void 0,{number:!0}]]),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":i[25]||(i[25]=e=>l.rec_brojljudi=e),placeholder:"Broj osoba",required:""},null,512),[[t.Jo,l.rec_brojljudi,void 0,{number:!0}]]),i[36]||(i[36]=(0,r.Lk)("button",{type:"submit"},"Sacuvaj izmene",-1))],32)])])):(0,r.Q3)("",!0)])])}var Le={name:"WelcomePage",data(){return{userFname:"",userLname:"",user_id:null,user_level:null,currentTab:"recepti",canAddRecipe:!1,prikaziFormu:!1,prikaziFormuZaIzmenu:!1,rec_naziv:"",rec_sastojci:"",rec_priprema:"",rec_vremepripreme:"",rec_brojljudi:"",message:"",korisnickiRecepti:[],izabraniRecept:null,sastojci:[],merneJedinice:[],receptSastojci:[{sas_id:null,mer_id:null,rsa_kolicina:null}],noviKomentar:"",komentari:[],novaLista:"",prikaziFormuZaKreiranjeListe:!1,novaListaNaziv:"",liste:[],receptiIzListe:[],prikaziDetalje:!1,izabranaListaId:null}},created(){const e=JSON.parse(localStorage.getItem("user"));e?(this.userFname=e.user_Fname,this.userLname=e.user_Lname,this.user_id=e.user_id,this.user_level=e.user_level,2===this.user_level?this.canAddRecipe=!0:console.log("Korisnik nema ovlascenja, canAddRecipe:",this.canAddRecipe),this.dobaviRecepte(),this.dobaviListe()):console.log("User nije pronadjen u localStorage"),this.dobaviSastojke(),this.dobaviMerneJedinice()},methods:{dobaviSastojke(){F.A.get("http://localhost:3000/sastojci").then((e=>{this.sastojci=e.data})).catch((e=>{console.error("Greska prilikom dobavljanja sastojaka",e)}))},dobaviMerneJedinice(){F.A.get("http://localhost:3000/merne_jedinice").then((e=>{this.merneJedinice=e.data})).catch((e=>{console.error("Greska prilikom dobavljanja mernih jedinica",e)}))},dodajSastojak(){this.receptSastojci.push({sas_id:null,mer_id:null,rsa_kolicina:null})},ukloniSastojak(e){this.receptSastojci.splice(e,1)},logout(){localStorage.removeItem("user"),this.$router.push("/login")},submitRecept(){if(this.user_id){const e=this.receptSastojci.map((e=>({naziv:e.naziv,mer_id:e.mer_id,rsa_kolicina:e.rsa_kolicina})));F.A.post("http://localhost:3000/recepti",{rec_naziv:this.rec_naziv,rec_priprema:this.rec_priprema,rec_vremepripreme:this.rec_vremepripreme,rec_brojljudi:this.rec_brojljudi,sastojci:e,user_id:this.user_id}).then((()=>{this.message="Recept je uspesno dodat!",this.resetForm(),this.dobaviRecepte()})).catch((e=>{console.error("Greska prilikom dodavanja recepta",e),this.message="Doslo je do greske prilikom dodavanja recepta."}))}},dobaviRecepte(){F.A.get(`http://localhost:3000/recepti/user/${this.user_id}`).then((e=>{this.korisnickiRecepti=e.data})).catch((e=>{console.error("Greska prilikom dobavljanja recepata:",e)}))},otvoriModal(e){console.log("Otvaranje modalnog prozora za recept:",e),this.izabraniRecept=e,this.dobaviKomentare(),console.log("Sadržaj izabraniRecept nakon postavljanja:",this.izabraniRecept)},zatvoriModal(){this.izabraniRecept=null,this.prikaziFormuZaIzmenu=!1,this.prikaziFormuZaKreiranjeListe=!1,this.prikaziDetalje=!1},skratiOpis(e){return e.length>100?e.substring(0,100)+"...":e},resetForm(){this.rec_naziv="",this.rec_priprema="",this.rec_vremepripreme="",this.rec_brojljudi="",this.rec_sastojci="",this.izabraniRecept=null},otvoriFormuZaIzmenu(e){e&&(this.izabraniRecept=e,this.rec_naziv=e.rec_naziv||"",this.rec_priprema=e.rec_priprema||"",this.rec_vremepripreme=e.rec_vremepripreme||"",this.rec_brojljudi=e.rec_brojljudi||"",this.receptSastojci=e.sastojci.map((e=>({sas_naziv:e.sas_naziv,rsa_kolicina:e.rsa_kolicina,mer_id:e.mer_id}))),this.prikaziFormuZaIzmenu=!0)},izmeniRecept(){const e=this.rec_vremepripreme?this.rec_vremepripreme:null,i=this.rec_brojljudi?this.rec_brojljudi:null;F.A.put(`http://localhost:3000/recepti/${this.izabraniRecept.rec_id}`,{rec_naziv:this.rec_naziv,rec_priprema:this.rec_priprema,rec_vremepripreme:e,rec_brojljudi:i,sastojci:this.receptSastojci}).then((()=>{this.message="Recept je uspešno izmenjen",this.resetForm(),this.prikaziFormuZaIzmenu=!1,this.dobaviRecepte()})).catch((e=>{console.error("Greška prilikom izmene recepta",e),this.message="Došlo je do greške prilikom izmene recepta."}))},obrisiRecept(e){confirm("Da li ste sigurni da zelite da obrisete recept")&&F.A.delete(`http://localhost:3000/recepti/${e}/${this.user_id}`,{data:{user_id:this.user_id}}).then((()=>{this.message="Recept je uspesno obrisan",this.dobaviRecepte()})).catch((e=>{console.error("Greska prilikom brisanja recepta:",e)}))},dodajKomentar(){if(!this.user_id)return void console.error("User ID nije definisan");const e={kom_sadrzaj:this.noviKomentar,user_id:this.user_id,rec_id:this.izabraniRecept.rec_id};F.A.post("http://localhost:3000/komentari",e).then((()=>{alert("Komentar je uspesno dodat"),this.noviKomentar="",this.dobaviKomentare()})).catch((e=>{console.error("Greska prilikom dodavanja komentara",e)}))},dobaviKomentare(){F.A.get(`http://localhost:3000/komentari/${this.izabraniRecept.rec_id}`).then((e=>{this.izabraniRecept.komentari=e.data.length>0?e.data:[]})).catch((e=>{console.error("Greska prilikom dobavljanja komentara",e)}))},obrisiKomentar(e){confirm("Da li ste sigurni da želite da obrišete ovaj komentar?")&&F.A.delete(`http://localhost:3000/komentari/${e}/${this.user_id}`).then((()=>{alert("Komentar je uspešno obrisan."),this.dobaviKomentare(this.izabraniRecept.rec_id)})).catch((e=>{console.error("Greška prilikom brisanja komentara:",e)}))},mozeBrisatiKomentar(e){return 1===this.user_level||this.user_id===e.user_id},dodajListu(){const e={lis_naziv:this.novaListaNaziv,user_id:this.user_id};F.A.post("http://localhost:3000/lista",e).then((()=>{alert("Lista je uspešno kreirana"),this.prikaziFormuZaKreiranjeListe=!1,this.novaListaNaziv=""})).catch((e=>{console.error("Greška prilikom kreiranja liste:",e)}))},dobaviListe(){F.A.get(`http://localhost:3000/liste/${this.user_id}`).then((e=>{this.liste=e.data})).catch((e=>{console.error("Greška prilikom dobavljanja listi:",e)}))},prikaziRecepteIzListe(e){this.izabranaListaId=e,F.A.get(`http://localhost:3000/lista/${e}/recepte`).then((e=>{this.receptiIzListe=e.data})).catch((e=>{console.error("Greška prilikom dobavljanja recepata iz liste:",e)}))},prikaziDetaljeRecepta(e){F.A.get(`http://localhost:3000/recepti/${e.rec_id}`).then((e=>{console.log("dobijeni podaci:",e.data),this.izabraniRecept=e.data,this.prikaziDetalje=!0,Array.isArray(e.data)&&e.data.length>0?(this.izabraniRecept=e.data[0],this.prikaziDetalje=!0):console.error("Nedostaju podaci za recept")})).catch((e=>{console.error("Greska prilikom dobavljanja recepata:",e)}))},ukloniReceptIzListe(e,i){F.A.delete(`http://localhost:3000/lista/${i}/recept/${e}`).then((()=>{alert("Recept uspesno uklonjen iz liste"),this.prikaziRecepteIzListe(i)})).catch((e=>{console.error("Greska prilikom uklanjanja recepata iz liste",e)}))}}};const ge=(0,k.A)(Le,[["render",ze]]);var Ce=ge;const ye={class:"loginform"};function Re(e,i,a,o,l,s){return(0,r.uX)(),(0,r.CE)("div",ye,[i[4]||(i[4]=(0,r.Lk)("img",{class:"login-logo",src:n},null,-1)),i[5]||(i[5]=(0,r.Lk)("h1",null,"Login",-1)),(0,r.Lk)("form",{onSubmit:i[2]||(i[2]=(0,t.D$)(((...e)=>s.login&&s.login(...e)),["prevent"]))},[(0,r.bo)((0,r.Lk)("input",{type:"email",placeholder:"mail@example.com","onUpdate:modelValue":i[0]||(i[0]=e=>l.email=e)},null,512),[[t.Jo,l.email]]),(0,r.bo)((0,r.Lk)("input",{type:"password",placeholder:"password","onUpdate:modelValue":i[1]||(i[1]=e=>l.password=e)},null,512),[[t.Jo,l.password]]),i[3]||(i[3]=(0,r.Lk)("button",{type:"submit",class:"loginbutton"},"Login",-1))],32)])}var fe={name:"LoginForm",data(){return{email:"",password:""}},methods:{async login(){try{const e=await F.A.post("http://localhost:3000/login",{email:this.email,password:this.password});200===e.status&&(localStorage.setItem("user",JSON.stringify(e.data.user)),this.$router.push("/welcome"))}catch(e){e.response&&401===e.response.status?alert("Pogresno korisnicko ime ili lozinka"):alert("Doslo je do greske prilikom prijave")}}}};const Ee=(0,k.A)(fe,[["render",Re]]);var Xe=Ee;const Ke={key:0},De={key:1};function Me(e,i,a,t,n,l){return(0,r.uX)(),(0,r.CE)("div",null,[i[1]||(i[1]=(0,r.Lk)("h1",null,"Javne Liste",-1)),n.javneListe.length>0?((0,r.uX)(),(0,r.CE)("div",Ke,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.javneListe,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.lis_id},[(0,r.Lk)("h3",null,(0,o.v_)(e.lis_naziv),1)])))),128))])):((0,r.uX)(),(0,r.CE)("div",De,i[0]||(i[0]=[(0,r.Lk)("p",null,"Nema listi.",-1)])))])}var Ie={name:"JavneListe",data(){return{javneListe:[]}},created(){this.dobaviJavneListe()},methods:{dobaviJavneListe(){F.A.get("http://localhost:3000/javneListe").then((e=>{this.javneListe=e.data})).catch((e=>{console.error("Greška prilikom dobavljanja javnih lista:",e)}))}}};const Fe=(0,k.A)(Ie,[["render",Me]]);var Se=Fe;const Ue=[{path:"/",name:"home",component:Z},{path:"/login",name:"LoginForm",component:Xe},{path:"/welcome",name:"Welcome",component:Ce},{path:"/javneliste",name:"JavneListe",component:Se}],Ze=(0,_.aE)({history:(0,_.LA)("/"),routes:Ue});var Ae=Ze;(0,t.Ef)(h).use(Ae).mount("#app")}},i={};function a(t){var r=i[t];if(void 0!==r)return r.exports;var o=i[t]={exports:{}};return e[t].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(i,t,r,o){if(!t){var n=1/0;for(u=0;u<e.length;u++){t=e[u][0],r=e[u][1],o=e[u][2];for(var l=!0,s=0;s<t.length;s++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](t[s])}))?t.splice(s--,1):(l=!1,o<n&&(n=o));if(l){e.splice(u--,1);var c=r();void 0!==c&&(i=c)}}return i}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[t,r,o]}}(),function(){a.d=function(e,i){for(var t in i)a.o(i,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(i){return 0===e[i]};var i=function(i,t){var r,o,n=t[0],l=t[1],s=t[2],c=0;if(n.some((function(i){return 0!==e[i]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(s)var u=s(a)}for(i&&i(t);c<n.length;c++)o=n[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},t=self["webpackChunkrecipevault"]=self["webpackChunkrecipevault"]||[];t.forEach(i.bind(null,0)),t.push=i.bind(null,t.push.bind(t))}();var t=a.O(void 0,[504],(function(){return a(3222)}));t=a.O(t)})();
//# sourceMappingURL=app.e15bfba4.js.map